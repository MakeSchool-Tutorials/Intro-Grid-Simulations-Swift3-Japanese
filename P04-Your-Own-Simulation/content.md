---
title: "オリジナルのシミュレーションを作ろう！"
slug: make-your-own
---

このチュートリアルの中で、２次元の配列、ヘルパー関数、タプルの使い方を学びました。ライフゲームをプログラムして、いくつかの森と炎のシミュレーションを作りました。さぁ、今度は自分のオリジナルのシミュレーションを作る時間です！

ガイドライン:

1. グリッドで表現できる、現実の世界や架空の世界をイメージしましょう。鶏と卵のシミュレーションはどうでしょう？狼に追いかけられる羊は？
次にどんな"プレーヤー"が必要かを決めましょう。そのプレーヤーになる絵文字や文字を決めて、パレットに入れましょう。
2. シミュレーションで表現したい _状態_ を考えてみましょう。`aTinyForest`関数では、🔥, 🌲, 空という３つの状態が存在しましたね。それぞれの状態は、別の状態に移るためのルールを持っていました。あなたの考えるオリジナルのシミュレーションでは、どんなロジックやアクションが必要でしょうか？
3. アイディアを思いついたら、`ForestFiresSimulation`で作ったような、新しいクラスを作りましょう。36と37行目をコメントアウトして、47行目と48行目をアンコメントしましょう。`YourSimulationClass()`を実際のクラス名に書き換えましょう。そのクラスでは、`setup()`と`update()`関数を書き換えていきます。`ForestFireSimulation`の中にある、前のページで既に作ったヘルパー関数をコピーして再利用しましょう！
4. コードが完成したら、実行してシミュレーションを実験しましょう。自分の思い通りのシミュレーションができましたか？

下のクラスや関数を参考にして、使ってみましょう。

## Simulationクラス

Simulationクラスから、新たなシミュレーションをサブクラスとして作ることができます。このシミュレーションクラスは、`grid`変数や`setup()`, `update()`関数などを持っていて、サブクラスを作ると、それらを書き換えながら使うことができるようになります。
例えば他にはこのような関数も持っています:

- `init()` 初期化の設定をする関数。`grid`を`[]`に設定したりします。
- `init(other: Simulation)` 他のシミュレーションを引数として使って初期化をする関数。
- `init?(file: String)` テキストファイルを引数にして初期化をする関数。このテキストファイルは、グリッドのサイズや文字が入っています。このテキストファイルの中に入っている`0`という数字は、空の状態を意味します。`map01.txt`を例として見てみましょう。
- `setup()` セットアップ関数。シミュレーションが画面に読み込まれる前に一度だけ呼び出されます。
- `update()` アップデート関数。プレイ中にタイマーが進む度に呼び出されます。ユーザーがストップボタンを押すときも呼び出されます。
- `grid` `[[Character?]]`タイプの変数。シミュレーションの状態を保存しています。`setup()`や `update()` の中で書き換えられることで、グリッドの状況が変化します。

## SimulationSceneクラス

SimulationSceneは、全体のプログラムを動かす役割をします。Simulationsを読み込んだり、UIやタッチイベント、タイマーなどを管理します。
いくつかの例:

- `init(sim: Simulation, palette: [Character?])` SimulationSceneを与えられたシミュレーションとパレットを元に作ります。この中で、`setup()`関数が呼び出されます。
- `play()` シミュレーションをスタートさせる関数です。
- `pause()` シミュレーションをストップさせる関数です。

さあ、シミュレーションづくりを楽しみましょう！！
